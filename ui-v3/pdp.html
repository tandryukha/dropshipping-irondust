<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>health.ee — Product Detail</title>
    <style>
      :root {
        --bg: #f2f3f5;
        --surface: #ffffff;
        --text: #111111;
        --muted: #565959;
        --brand: #131921;
        --accent: #ff9900;
        --border: #e5e7eb;
        --price: #b12704;
        --green: #007600;
        --yellow: #f7ca00;
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0;
        font: 14px/1.4 -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        color: var(--text);
        background: var(--bg);
      }
      a { color: #007185; text-decoration: none; }
      a:hover { color: #c7511f; text-decoration: underline; }

      /* Header */
      .topbar {
        background: var(--brand);
        color: #fff;
        display: grid;
        grid-template-columns: auto 1fr auto;
        gap: 8px;
        align-items: center;
        padding: 8px 12px;
      }
      .logo { font-size: 26px; font-weight: 800; letter-spacing: -.2px; }
      .logo .tld { color: var(--accent); font-size: 18px; }
      .cart-nav { display: inline-flex; align-items: center; gap: 6px; position: relative; cursor: pointer; }
      .cart-nav .cart-icon { width: 30px; height: 24px; }
      .cart-nav .cart-icon svg { width: 100%; height: 100%; fill: none; stroke: #fff; stroke-width: 2.4; }
      .cart-nav .badge-top {
        position: absolute; top: -2px; left: 14px; background: var(--accent); color: #111; border-radius: 999px; padding: 0 6px;
        font-weight: 800; font-size: 12px; line-height: 18px; min-width: 18px; text-align: center;
      }

      /* PDP layout */
      .shell { padding: 12px; display: grid; gap: 12px; grid-template-columns: 1fr; }
      .card { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; }

      /* Sections */
      .gallery { padding: 12px; }
      .gallery .main-img { width: 100%; height: 280px; border: 1px solid var(--border); border-radius: 8px; background: #eef2f7; display: flex; align-items: center; justify-content: center; color: #6b7280; font-weight: 800; }
      .thumbs { display: grid; grid-auto-flow: column; gap: 8px; margin-top: 8px; overflow-x: auto; padding-bottom: 2px; }
      .thumbs .t { width: 66px; height: 66px; border: 1px solid var(--border); border-radius: 8px; background: #f3f4f6; display: grid; place-items: center; color: #6b7280; font-size: 11px; cursor: pointer; }
      .thumbs .t.active { outline: 2px solid #111; outline-offset: 2px; }

      .info { padding: 12px; }
      .title { font-size: 18px; font-weight: 800; line-height: 1.25; }
      .brand { color: var(--muted); margin-top: 4px; font-size: 13px; }
      .bullets { margin: 10px 0; padding-left: 18px; }
      .bullets li { margin: 4px 0; }

      .variants { display: grid; gap: 8px; margin: 12px 0; }
      .variants .row { display: grid; gap: 8px; }
      .chip-row { display: flex; flex-wrap: wrap; gap: 8px; }
      .chip { border: 1px solid #d5d9d9; background: #f0f2f2; color: #0f1111; border-radius: 999px; padding: 6px 10px; font-size: 12px; cursor: pointer; }
      .chip.active { background: #111; color: #fff; border-color: #111; }

      .buy { padding: 12px; }
      .price { color: var(--price); display: flex; align-items: flex-end; gap: 2px; }
      .price .currency { font-size: 14px; }
      .price .whole { font-size: 22px; line-height: 1; }
      .price .fraction { font-size: 12px; position: relative; top: -2px; }
      .save { color: #c45500; font-size: 12px; margin-top: 6px; }

      .purchase { margin: 12px 0; border: 1px solid #d5d9d9; border-radius: 8px; overflow: hidden; }
      .purchase .opt { display: grid; grid-template-columns: 22px 1fr auto; gap: 8px; align-items: center; padding: 10px 12px; background: #fff; }
      .purchase .opt + .opt { border-top: 1px solid #e7e9ec; }
      .purchase .label { font-weight: 700; }
      .purchase .sub { color: var(--muted); font-size: 12px; }
      .purchase .opt.active { background: #f7fafa; }

      .qty-row { display: flex; align-items: center; gap: 8px; margin: 12px 0; }
      select, .btn { border: 1px solid #d5d9d9; border-radius: 8px; background: #f0f2f2; padding: 8px 10px; font-size: 14px; }
      .btn.primary { background: #FFD814; border-color: #FCD200; color: #0F1111; box-shadow: 0 2px 5px 0 rgba(213,217,217,.5); }
      .btn.primary:hover { background: #F7CA00; border-color: #F2C200; }
      .btn.primary:active { background: #F0B800; }

      .subtotal { margin-top: 8px; font-size: 13px; }
      .subtotal .val { font-weight: 800; color: var(--price); }
      .ship { margin-top: 6px; font-size: 12px; color: var(--green); }

      /* Desktop enhancements */
      @media (min-width: 1024px) {
        .shell { grid-template-columns: minmax(340px, 480px) minmax(0, 1fr) 360px; align-items: start; }
        .gallery, .info, .buy { position: sticky; top: 16px; }
        .info { top: 16px; }
        .gallery { top: 16px; }
        .buy { top: 16px; }
      }
    </style>
  </head>
  <body>
    <div class="topbar">
      <div class="logo">health<span class="tld">.ee</span></div>
      <div></div>
      <div class="cart-nav" id="cartBtn" aria-label="Cart">
        <span class="badge-top" id="cartBadge">0</span>
        <div class="cart-icon">
          <svg viewBox="0 0 40 32" xmlns="http://www.w3.org/2000/svg">
            <path d="M 8 8 L 12 8 L 16 24 L 34 24 M 16 24 L 18 28 L 32 28" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="20" cy="30" r="1.5" fill="#fff"/>
            <circle cx="30" cy="30" r="1.5" fill="#fff"/>
          </svg>
        </div>
      </div>
    </div>

    <main class="shell">
      <!-- Gallery -->
      <section class="card gallery" id="gallery">
        <div class="main-img" id="mainImg">IMG</div>
        <div class="thumbs" id="thumbs">
          <div class="t active" data-idx="0">IMG 1</div>
          <div class="t" data-idx="1">IMG 2</div>
          <div class="t" data-idx="2">IMG 3</div>
        </div>
      </section>

      <!-- Info -->
      <section class="card info">
        <div class="title" id="title">Whey Protein 1kg — Vanilla</div>
        <div class="brand">Brand: <a href="#" id="brand">OptiMax</a></div>
        <ul class="bullets">
          <li>High-quality whey protein, 24g per serving</li>
          <li>Low sugar, instant mixing</li>
          <li>Great taste: Vanilla</li>
        </ul>
        <div class="variants">
          <div class="row">
            <div style="font-weight:700;">Flavour</div>
            <div class="chip-row" id="flavours"></div>
          </div>
          <div class="row">
            <div style="font-weight:700;">Size</div>
            <div class="chip-row" id="sizes"></div>
          </div>
        </div>
      </section>

      <!-- Buy box -->
      <aside class="card buy" aria-labelledby="buyboxLabel">
        <div id="buyboxLabel" class="sr-only" style="position:absolute;left:-9999px;">Purchase options</div>
        <div class="price" aria-live="polite"><span class="currency">€</span><span class="whole" id="priceWhole">29</span><span class="fraction" id="priceFraction">99</span></div>
        <div class="save" id="saveMsg" style="display:none;">Save 5% with Subscribe & Save</div>

        <div class="purchase" role="radiogroup" aria-label="Purchase options">
          <label class="opt active">
            <input type="radio" name="purchase" value="one" checked style="margin:0;" />
            <div>
              <div class="label">One-time purchase</div>
              <div class="sub">Buy once at the current price</div>
            </div>
            <div id="onePrice">€29.99</div>
          </label>
          <label class="opt">
            <input type="radio" name="purchase" value="sub" style="margin:0;" />
            <div>
              <div class="label">Subscribe & Save</div>
              <div class="sub">Save 5% • Cancel anytime</div>
            </div>
            <div id="subPrice">€28.49</div>
          </label>
        </div>

        <div class="qty-row">
          <label for="qty" style="font-weight:700;">Qty</label>
          <select id="qty" aria-label="Quantity">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
          <button class="btn primary" id="addBtn">Add to Basket</button>
        </div>

        <div class="subtotal">Subtotal: <span class="val" id="subtotal">€29.99</span></div>
        <div class="ship">FREE delivery if you spend €59</div>
      </aside>
    </main>

    <script>
      // Basic PDP data (mock)
      const PRODUCT = {
        name: 'Whey Protein 1kg — Vanilla',
        brand: 'OptiMax',
        basePrice: 29.99,
        flavours: ['Vanilla','Chocolate','Strawberry','Unflavoured'],
        sizes: ['1kg','2kg','900g']
      };

      // Elements
      const $ = (s) => document.querySelector(s);
      const $$ = (s) => Array.from(document.querySelectorAll(s));
      const priceWhole = $('#priceWhole');
      const priceFraction = $('#priceFraction');
      const saveMsg = $('#saveMsg');
      const qtySel = $('#qty');
      const subtotalEl = $('#subtotal');
      const cartBadge = $('#cartBadge');
      let cartCount = 0;

      // Variants
      function buildChips(host, values) {
        host.innerHTML = values.map((v,i) => `<button class="chip${i===0?' active':''}" data-val="${v}">${v}</button>`).join('');
        $$(host.tagName.toLowerCase()==='div' ? `#${host.id} .chip` : '.chip').forEach(ch => ch.addEventListener('click', () => {
          $$("#"+host.id+" .chip").forEach(x => x.classList.remove('active'));
          ch.classList.add('active');
        }));
      }
      buildChips($('#flavours'), PRODUCT.flavours);
      buildChips($('#sizes'), PRODUCT.sizes);

      // Purchase selection
      const purchaseRadios = $$('input[name="purchase"]');
      const DISCOUNT = 0.05; // 5%

      function getUnitPrice() {
        const sub = purchaseRadios.find(r => r.checked && r.value==='sub');
        const price = sub ? PRODUCT.basePrice * (1 - DISCOUNT) : PRODUCT.basePrice;
        return Math.round(price * 100) / 100;
      }

      function renderPrice() {
        const p = getUnitPrice();
        const [w,f] = p.toFixed(2).split('.');
        priceWhole.textContent = w;
        priceFraction.textContent = f;
        saveMsg.style.display = purchaseRadios.find(r=>r.checked && r.value==='sub') ? 'block' : 'none';
        $('#onePrice').textContent = `€${PRODUCT.basePrice.toFixed(2)}`;
        $('#subPrice').textContent = `€${(PRODUCT.basePrice*(1-DISCOUNT)).toFixed(2)}`;
        renderSubtotal();
      }

      function renderSubtotal() {
        const qty = parseInt(qtySel.value, 10) || 1;
        const sub = getUnitPrice() * qty;
        subtotalEl.textContent = `€${sub.toFixed(2)}`;
      }

      purchaseRadios.forEach(r => {
        r.addEventListener('change', () => {
          $$('.purchase .opt').forEach(o => o.classList.remove('active'));
          r.closest('.opt')?.classList.add('active');
          renderPrice();
        });
      });
      qtySel.addEventListener('change', renderSubtotal);

      // Cart
      $('#addBtn').addEventListener('click', () => {
        const qty = parseInt(qtySel.value, 10) || 1;
        cartCount += qty;
        cartBadge.textContent = String(cartCount);
        // announce
        const p = getUnitPrice();
        const total = p * qty;
        console.log(`Added ${qty} × at €${p.toFixed(2)} (total €${total.toFixed(2)})`);
      });

      // Thumbs
      $$('#thumbs .t').forEach(t => t.addEventListener('click', () => {
        $$('#thumbs .t').forEach(x => x.classList.remove('active'));
        t.classList.add('active');
        $('#mainImg').textContent = `IMG ${t.getAttribute('data-idx')}`;
      }));

      // Initial
      (function init(){
        $('#title').textContent = PRODUCT.name;
        $('#brand').textContent = PRODUCT.brand;
        renderPrice();
      })();
    </script>
  </body>
  </html>


