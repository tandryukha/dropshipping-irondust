<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Supplements.ee — Search Overlay Demo</title>
<style>
  :root{
    --bg:#0b1020;        /* dark blue-ish background to make the card pop */
    --card:#ffffff;
    --muted:#6b7280;     /* gray-500 */
    --ink:#0f172a;       /* slate-900 */
    --brand:#22d3ee;     /* cyan-400 */
    --brand-ink:#0e7490; /* cyan-700 */
    --chip:#f1f5f9;      /* slate-100 */
    --ring:rgba(34,211,238,.45);
    --shadow:0 10px 30px rgba(2,8,23,.25);
    --rad:16px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Noto Sans, "Apple Color Emoji","Segoe UI Emoji";background:linear-gradient(180deg,#0b1020,#111827);color:#0b1220}
  a{color:inherit}

  /* --- Hero --- */
  .hero{max-width:1100px;margin:40px auto 0;padding:24px}
  .brand{display:flex;gap:10px;align-items:center;color:white;font-weight:800;letter-spacing:.2px}
  .brand .dot{width:28px;height:28px;border-radius:10px;background:linear-gradient(135deg,#22d3ee,#3b82f6);box-shadow:0 6px 16px rgba(34,211,238,.5)}
  .tagline{color:#cbd5e1;margin:6px 0 22px}
  .hero-card{background:var(--card);border-radius:24px;box-shadow:var(--shadow);padding:28px}

  .search-row{display:flex;gap:12px;align-items:center}
  .search{position:relative;flex:1}
  .search input{width:100%;font-size:18px;padding:16px 52px 16px 44px;border-radius:18px;border:1px solid #e2e8f0;outline:none;box-shadow:0 2px 0 rgba(15,23,42,.02)}
  .search input:focus{border-color:var(--brand);box-shadow:0 0 0 4px var(--ring)}
  .search svg{position:absolute;left:14px;top:50%;transform:translateY(-50%);opacity:.6}
  .kbd{font-size:12px;padding:6px 8px;border:1px solid #e5e7eb;border-radius:10px;color:#475569;background:#fff}
  .hotkey{display:flex;gap:8px;align-items:center;color:#64748b}

  .goals{display:flex;gap:10px;flex-wrap:wrap;margin-top:16px}
  .chip{display:inline-flex;gap:8px;align-items:center;border-radius:999px;padding:8px 12px;background:var(--chip);border:1px solid #e5e7eb;cursor:pointer;user-select:none}
  .chip[data-active="1"]{background:#ecfeff;border-color:#a5f3fc}
  .chip .dot{width:8px;height:8px;border-radius:999px;background:#94a3b8}
  .chip[data-active="1"] .dot{background:#06b6d4}

  /* --- Overlay --- */
  .overlay{position:fixed;inset:0;background:rgba(2,6,23,.55);display:none;align-items:flex-start;justify-content:center;padding:40px 20px;z-index:50}
  .overlay[open]{display:flex}
  .sheet{width:min(1200px,96vw);background:var(--card);border-radius:24px;box-shadow:0 30px 80px rgba(2,8,23,.35);overflow:hidden;display:grid;grid-template-columns:1fr 300px}
  .sheet-header{display:flex;gap:10px;align-items:center;padding:16px 16px;border-bottom:1px solid #eef2f7}
  .sheet-header .search{flex:1}
  .btn{appearance:none;border:1px solid #e5e7eb;background:white;border-radius:12px;padding:10px 12px;cursor:pointer}
  .btn-primary{background:linear-gradient(135deg,#22d3ee,#3b82f6);border:none;color:white;box-shadow:0 8px 20px rgba(34,211,238,.35)}
  .btn-ghost{border:none;background:transparent;color:#475569}
  .close{margin-left:auto}

  .chips-dock{display:flex;gap:8px;align-items:center;padding:12px 16px;border-bottom:1px solid #eef2f7;flex-wrap:wrap}

  .sheet-body{display:grid;grid-template-columns:1fr 300px;gap:0}
  .results{padding:16px 16px 96px;height:62vh;overflow:auto}
  .grid{display:grid;grid-template-columns:repeat(3, minmax(0,1fr));gap:14px}
  .card{border:1px solid #e5e7eb;border-radius:16px;padding:12px;display:grid;grid-template-columns:64px 1fr auto;gap:12px;align-items:center}
  .thumb{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,#e5faff,#f1f5f9);display:flex;align-items:center;justify-content:center;font-weight:700;color:#0284c7}
  .pill{font-size:12px;background:#f1f5f9;border:1px solid #e5e7eb;padding:2px 8px;border-radius:999px;margin-left:6px;color:#475569}
  .price{font-weight:800}
  .meta{font-size:12px;color:#64748b;margin-top:3px}
  .add{justify-self:end}

  .rail{border-left:1px solid #eef2f7;padding:16px;overflow:auto;height:62vh}
  .guide{border:1px solid #e5e7eb;border-radius:16px;padding:12px;margin-bottom:12px}
  .guide .tiny{font-size:12px;color:#64748b}

  .sheet-footer{position:sticky;bottom:0;left:0;right:0;display:flex;align-items:center;gap:10px;padding:12px 16px;background:white;border-top:1px solid #eef2f7}

  /* --- Filters Panel (slide-in) --- */
  .filters{position:fixed;top:0;right:-420px;width:360px;max-width:92vw;height:100%;background:white;border-left:1px solid #e5e7eb;box-shadow:-10px 0 30px rgba(2,8,23,.15);transition:right .22s ease;z-index:60;padding:14px 16px;overflow:auto}
  .filters[open]{right:0}
  .filters h3{margin:8px 0 6px}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .range{display:flex;align-items:center;gap:8px}

  /* --- Responsive --- */
  @media (max-width: 1000px){
    .sheet{grid-template-columns:1fr}
    .sheet-body{grid-template-columns:1fr}
    .rail{display:none}
    .grid{grid-template-columns:repeat(2, minmax(0,1fr))}
  }
  @media (max-width: 640px){
    .hero{margin-top:14px}
    .grid{grid-template-columns:1fr}
    .search input{font-size:16px}
    .overlay{padding:10px}
    .results{height:70vh}
  }
</style>
</head>
<body>
  <div class="hero">
    <div class="brand"><span class="dot"></span> SUPPLEMENTS.EE</div>
    <div class="tagline">Sports & Nutrition — fast, transparent, human.</div>

    <div class="hero-card" aria-labelledby="searchTitle">
      <div class="search-row">
        <div class="search" role="search" aria-label="Search products">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          <input id="homeInput" placeholder="Search whey, creatine, goals…" autocomplete="off" />
        </div>
        <div class="hotkey"><span class="kbd">/</span><span class="kbd">⌘K</span></div>
      </div>
      <div class="goals" id="homeGoals">
        <button class="chip" data-goal="strength"><span class="dot"></span>Strength</button>
        <button class="chip" data-goal="preworkout"><span class="dot"></span>Pre‑workout</button>
        <button class="chip" data-goal="endurance"><span class="dot"></span>Endurance</button>
        <button class="chip" data-goal="wellness"><span class="dot"></span>Wellness</button>
      </div>
    </div>
  </div>

  <!-- Search Overlay -->
  <div class="overlay" id="overlay" aria-hidden="true" aria-label="Search dialog" role="dialog">
    <div class="sheet" role="document">
      <div class="sheet-header">
        <div class="search" role="search">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          <input id="overlayInput" placeholder="Type to search…" aria-label="Search input" autocomplete="off" />
        </div>
        <button class="btn" id="btnFilters" aria-haspopup="true" aria-controls="filters">Filters</button>
        <button class="btn-ghost btn" id="btnClear">Clear</button>
        <button class="btn close" id="btnClose" aria-label="Close">✕</button>
      </div>

      <div class="chips-dock" id="chipsDock">
        <span class="chip" data-chip="inStock">In stock</span>
        <span class="chip" data-chip="capsules">Capsules</span>
        <span class="chip" data-chip="vegan">Vegan</span>
        <span class="chip" data-chip="lte20">≤ €20</span>
        <span class="chip" data-chip="goal" hidden><span class="dot"></span><span id="goalLabel">Goal</span></span>
        <span class="chip" id="moreFilters">More…</span>
      </div>

      <div class="sheet-body">
        <div class="results">
          <div id="emptyState" style="display:none;color:#64748b;padding:16px 4px">Try typing “creatine”, “whey”, or choose a goal above. Recent: <span class="pill">c4</span> <span class="pill">isolate</span></div>
          <div class="grid" id="grid"></div>
        </div>
        <aside class="rail">
          <div class="guide">
            <div class="tiny">3‑min read • Guide</div>
            <div><strong>How to time creatine?</strong></div>
            <div class="tiny">Daily is better than timing; saturate 3–4 weeks or load for 5–7 days.</div>
          </div>
          <div class="guide">
            <div class="tiny">Article</div>
            <div><strong>Whey vs Plant: which is better?</strong></div>
            <div class="tiny">Both work. Whey isolates for lactose‑sensitive; plant blends for vegans.</div>
          </div>
          <div class="guide">
            <div class="tiny">Checklist</div>
            <div><strong>Beginner stack checklist</strong></div>
            <div class="tiny">Creatine • Whey • Omega‑3 • Vitamin D • Electrolytes</div>
          </div>
        </aside>
      </div>

      <div class="sheet-footer">
        <div id="summary" style="color:#475569">—</div>
        <div style="margin-left:auto;display:flex;gap:8px">
          <button class="btn">Save search</button>
          <button class="btn-primary btn">Add top result</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Filters Slide-in -->
  <section class="filters" id="filters" aria-label="Filters panel">
    <div style="display:flex;align-items:center;gap:8px">
      <h2 style="margin:6px 0 10px">Filters</h2>
      <button class="btn-ghost btn" id="filtersClose" style="margin-left:auto">✕</button>
    </div>
    <h3>Availability</h3>
    <label><input type="checkbox" id="fltStock"> In stock only</label>

    <h3>Form</h3>
    <div class="row">
      <label><input type="checkbox" class="fltForm" value="powder"> Powder</label>
      <label><input type="checkbox" class="fltForm" value="capsules"> Capsules</label>
      <label><input type="checkbox" class="fltForm" value="tabs"> Tabs</label>
    </div>

    <h3>Diet</h3>
    <label><input type="checkbox" id="fltVegan"> Vegan</label>

    <h3>Price</h3>
    <div class="range">
      <label>Max € <input id="fltPriceTo" type="number" min="0" step="1" value="999" style="width:100px"></label>
    </div>

    <h3>Brand</h3>
    <div class="row" id="fltBrands"></div>

    <div style="height:10px"></div>
    <button class="btn-primary btn" id="filtersApply">Apply</button>
  </section>

<script>
// ------- Mock data (tiny, illustrative) -------
const PRODUCTS = [
  {id:1,name:'MST Creatine Monohydrate 3400mg 90caps',brand:'MST',price:18.90,form:'capsules',tags:['strength'],vegan:true,inStock:true},
  {id:2,name:'MST Creatine Kick Sour Green Apple 300g',brand:'MST',price:21.90,form:'powder',tags:['strength','endurance'],vegan:true,inStock:true},
  {id:3,name:'SELF Creatine 500g',brand:'SELF',price:29.90,form:'powder',tags:['strength'],vegan:true,inStock:true},
  {id:4,name:'OstroVit Creatine Malate 250g',brand:'OstroVit',price:13.40,form:'powder',tags:['strength'],vegan:true,inStock:true},
  {id:5,name:'Mutant Creakong 300g',brand:'Mutant',price:18.90,form:'powder',tags:['strength'],vegan:false,inStock:true},
  {id:6,name:'C4 Original Pre‑Workout 60 servings',brand:'Cellucor',price:38.90,form:'powder',tags:['preworkout','strength'],vegan:false,inStock:true},
  {id:7,name:'C4 Original Pre‑Workout 30 servings',brand:'Cellucor',price:26.90,form:'powder',tags:['preworkout'],vegan:false,inStock:true},
  {id:8,name:'Optimum Nutrition Pre‑Workout 330g',brand:'Optimum',price:32.90,form:'powder',tags:['preworkout'],vegan:false,inStock:false},
  {id:9,name:'MST L‑Glutamine 300g',brand:'MST',price:18.90,form:'powder',tags:['recovery','endurance'],vegan:true,inStock:true},
  {id:10,name:'NOW Taurine 500mg 100 veg caps',brand:'NOW',price:12.90,form:'capsules',tags:['wellness'],vegan:true,inStock:true},
  {id:11,name:'OstroVit 100% Peanut Butter 1kg',brand:'OstroVit',price:13.90,form:'jar',tags:['wellness'],vegan:true,inStock:true},
  {id:12,name:'MST Chlorophyll Liquid 500ml',brand:'MST',price:24.90,form:'liquid',tags:['wellness'],vegan:true,inStock:true},
  {id:13,name:'Optimum Nutrition Whey 908g',brand:'Optimum',price:34.90,form:'powder',tags:['protein','strength'],vegan:false,inStock:true},
  {id:14,name:'BioTechUSA Amino Energy Zero',brand:'BioTechUSA',price:31.90,form:'powder',tags:['preworkout','endurance'],vegan:false,inStock:true},
  {id:15,name:'NOW Alpha Lipoic Acid 250mg 60 caps',brand:'NOW',price:16.90,form:'capsules',tags:['wellness'],vegan:true,inStock:true},
  {id:16,name:'BIOTECHUSA Ginkgo Biloba',brand:'BioTechUSA',price:18.90,form:'capsules',tags:['wellness'],vegan:true,inStock:false},
  {id:17,name:'MST Flex Pro 420g',brand:'MST',price:29.90,form:'powder',tags:['wellness'],vegan:false,inStock:true},
  {id:18,name:'OstroVit Creatine 500g',brand:'OstroVit',price:19.90,form:'powder',tags:['strength'],vegan:true,inStock:true},
];

const STATE = {
  q:'',
  chips:{inStock:false,capsules:false,vegan:false,lte20:false},
  goal:null,
  filters:{stock:false,forms:new Set(),vegan:false,priceTo:999,brands:new Set()},
};

const qs = s=>document.querySelector(s);
const qsa = s=>Array.from(document.querySelectorAll(s));

// ------- Overlay open/close -------
const overlay = qs('#overlay');
const homeInput = qs('#homeInput');
const overlayInput = qs('#overlayInput');
const grid = qs('#grid');
const summary = qs('#summary');
const emptyState = qs('#emptyState');

function openOverlay({focus=true}={}){
  overlay.setAttribute('open','');
  overlay.setAttribute('aria-hidden','false');
  if(focus){ setTimeout(()=>overlayInput.focus(), 30); }
  render();
}
function closeOverlay(){
  overlay.removeAttribute('open');
  overlay.setAttribute('aria-hidden','true');
}

homeInput.addEventListener('focus', ()=>{
  STATE.q='';
  overlayInput.value='';
  openOverlay();
});

qs('#btnClose').addEventListener('click', closeOverlay);

// Hotkeys: / focuses; Cmd/Ctrl+K toggles; Esc closes
window.addEventListener('keydown', (e)=>{
  if(e.key === '/' && !e.metaKey && !e.ctrlKey && !e.altKey){
    e.preventDefault();
    if(!overlay.hasAttribute('open')) openOverlay();
    else overlayInput.focus();
  }
  if((e.key.toLowerCase()==='k') && (e.metaKey||e.ctrlKey)){
    e.preventDefault();
    if(overlay.hasAttribute('open')) closeOverlay(); else openOverlay();
  }
  if(e.key==='Escape'){
    if(qs('#filters').hasAttribute('open')) closeFilters(); else closeOverlay();
  }
});

// Keep hero goal chips opening with preset
qs('#homeGoals').addEventListener('click',(e)=>{
  const chip = e.target.closest('.chip');
  if(!chip) return;
  const goal = chip.getAttribute('data-goal');
  STATE.goal = goal; // set preset
  openOverlay();
  applyGoalPreset(goal);
});

// ------- Chips Dock -------
qs('#chipsDock').addEventListener('click', (e)=>{
  const chip = e.target.closest('.chip');
  if(!chip) return;
  const key = chip.getAttribute('data-chip');
  if(key==='goal' || key==='moreFilters') return; // handled elsewhere
  const next = !(chip.dataset.active==='1');
  chip.dataset.active = next ? '1' : '0';
  STATE.chips[key] = next;
  if(key==='capsules'){
    // also apply in panel forms
    setFormInPanel('capsules', next);
  }
  render();
});

qs('#moreFilters').addEventListener('click', openFilters);
qs('#btnFilters').addEventListener('click', openFilters);
qs('#btnClear').addEventListener('click', ()=>{ resetAll(); render(); });

// ------- Filters panel -------
const panel = qs('#filters');
function openFilters(){ panel.setAttribute('open',''); }
function closeFilters(){ panel.removeAttribute('open'); }
qs('#filtersClose').addEventListener('click', closeFilters);
qs('#filtersApply').addEventListener('click', ()=>{ closeFilters(); render(); });

qs('#fltStock').addEventListener('change', (e)=>{ STATE.filters.stock = e.target.checked; render(); });
qs('#fltVegan').addEventListener('change', (e)=>{ STATE.filters.vegan = e.target.checked; render(); });
qs('#fltPriceTo').addEventListener('input', (e)=>{ STATE.filters.priceTo = +e.target.value || 999; });
qsa('.fltForm').forEach(cb=>cb.addEventListener('change', ()=>{
  const set = STATE.filters.forms; set.clear();
  qsa('.fltForm').forEach(x=>{ if(x.checked) set.add(x.value); });
}));

// Dynamically populate brands
(function initBrands(){
  const brands = [...new Set(PRODUCTS.map(p=>p.brand))].sort();
  const host = qs('#fltBrands');
  brands.forEach(b=>{
    const id = 'b_'+b.toLowerCase().replace(/\s+/g,'_');
    const label = document.createElement('label');
    label.innerHTML = `<input type="checkbox" class="fltBrand" value="${b}" id="${id}"> ${b}`;
    host.appendChild(label);
  });
  host.addEventListener('change', ()=>{
    const set = STATE.filters.brands; set.clear();
    qsa('.fltBrand').forEach(x=>{ if(x.checked) set.add(x.value); });
    render();
  });
})();

function setFormInPanel(form, checked){
  qsa('.fltForm').forEach(cb=>{ if(cb.value===form) cb.checked = checked; });
  if(checked) STATE.filters.forms.add(form); else STATE.filters.forms.delete(form);
}

// ------- Search input (debounced) -------
function debounce(fn,ms){let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>fn(...a),ms)};}
overlayInput.addEventListener('input', debounce((e)=>{ STATE.q = e.target.value.trim(); render(); }, 220));

// ------- Goal presets -------
function applyGoalPreset(goal){
  STATE.goal = goal;
  // Visual label in chips dock
  const goalChip = qs('[data-chip="goal"]');
  if(goal){
    qs('#goalLabel').textContent = goal[0].toUpperCase()+goal.slice(1).replace('-', ' ');
    goalChip.hidden = false; goalChip.dataset.active='1';
  } else { goalChip.hidden = true; }

  // Example effect: tune filters and query
  if(goal==='preworkout'){
    STATE.q='c4'; overlayInput.value='c4';
  } else if(goal==='strength'){
    STATE.q='creatine'; overlayInput.value='creatine';
  } else if(goal==='endurance'){
    STATE.q='amino'; overlayInput.value='amino';
  } else if(goal==='wellness'){
    STATE.q='omega'; overlayInput.value='omega';
  }
  render();
}

// ------- Filtering logic -------
function match(p){
  const q = STATE.q.toLowerCase();
  if(q){
    const hay = (p.name + ' ' + p.brand + ' ' + p.tags.join(' ')).toLowerCase();
    if(!hay.includes(q)) return false;
  }
  // chips
  if(STATE.chips.inStock && !p.inStock) return false;
  if(STATE.chips.capsules && p.form!=='capsules') return false;
  if(STATE.chips.vegan && !p.vegan) return false;
  if(STATE.chips.lte20 && !(p.price<=20)) return false;

  // panel filters
  if(STATE.filters.stock && !p.inStock) return false;
  if(STATE.filters.vegan && !p.vegan) return false;
  if(!(p.price <= STATE.filters.priceTo)) return false;
  if(STATE.filters.forms.size && !STATE.filters.forms.has(p.form)) return false;
  if(STATE.filters.brands.size && !STATE.filters.brands.has(p.brand)) return false;

  // goal boost: not a filter, but could rank; here just pass
  return true;
}

function sortFn(a,b){
  // Simple: cheaper first, then brand
  return a.price - b.price || a.brand.localeCompare(b.brand);
}

function render(){
  const results = PRODUCTS.filter(match).sort(sortFn);
  // counts on chips
  const countUnder20 = PRODUCTS.filter(p=>p.price<=20).length; qs('[data-chip="lte20"]').setAttribute('title', `Items ≤€20: ${countUnder20}`);

  emptyState.style.display = (STATE.q || STATE.goal || anyActive()) ? 'none' : 'block';
  grid.innerHTML = results.map(p=>cardHTML(p)).join('');
  summary.textContent = `${results.length} results` + (STATE.q?` for “${STATE.q}”`:'');
}

function anyActive(){
  return STATE.chips.inStock || STATE.chips.capsules || STATE.chips.vegan || STATE.chips.lte20 || !!STATE.goal || STATE.q;
}

function cardHTML(p){
  const initials = (p.brand||'?').slice(0,3).toUpperCase();
  const tags = p.tags.slice(0,2).map(t=>`<span class="pill">${t}</span>`).join('');
  return `<div class="card" tabindex="0" aria-label="${p.name}">
    <div class="thumb">${initials}</div>
    <div>
      <div style="font-weight:600">${p.name}</div>
      <div class="meta">${p.form} ${p.vegan?'• vegan':''} ${p.inStock?'• in stock':'• out of stock'} ${tags}</div>
    </div>
    <div style="display:grid;gap:6px;justify-items:end">
      <div class="price">€${p.price.toFixed(2)}</div>
      <button class="btn add">Add</button>
    </div>
  </div>`;
}

function resetAll(){
  STATE.q=''; overlayInput.value='';
  STATE.goal=null; qs('[data-chip="goal"]').hidden=true;
  for(const k of Object.keys(STATE.chips)){ STATE.chips[k]=false; }
  qsa('[data-chip]').forEach(ch=>{ ch.dataset.active='0'; });
  // panel
  qs('#fltStock').checked=false;
  qs('#fltVegan').checked=false;
  qs('#fltPriceTo').value=999; STATE.filters.priceTo=999;
  qsa('.fltForm, .fltBrand').forEach(x=>x.checked=false);
  STATE.filters.forms.clear(); STATE.filters.brands.clear(); STATE.filters.vegan=false; STATE.filters.stock=false;
}

// Initial render
render();
</script>
</body>
</html>